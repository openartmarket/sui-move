import { getCreatedObjects, TransactionBlock } from "@mysten/sui.js";
import { getSigner, handleTransactionResponse } from "./helpers";
export async function createVoteRequest({ artworkId, request, adminCapId, packageId, signerPhrase, }) {
    const { signer } = getSigner(signerPhrase);
    const tx = new TransactionBlock();
    tx.moveCall({
        target: `${packageId}::dao::create_vote_request`,
        arguments: [tx.object(adminCapId), tx.pure(artworkId), tx.pure(request)],
    });
    const txRes = await signer.signAndExecuteTransactionBlock({
        transactionBlock: tx,
        requestType: "WaitForLocalExecution",
        options: {
            showObjectChanges: true,
            showEffects: true,
        },
    });
    handleTransactionResponse(txRes);
    const vote_request_id = getCreatedObjects(txRes)?.[0].reference.objectId;
    return vote_request_id;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidm90ZV9yZXF1ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3ZvdGVfcmVxdWVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVyRSxPQUFPLEVBQUUsU0FBUyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sV0FBVyxDQUFDO0FBR2pFLE1BQU0sQ0FBQyxLQUFLLFVBQVUsaUJBQWlCLENBQUMsRUFDdEMsU0FBUyxFQUNULE9BQU8sRUFDUCxVQUFVLEVBQ1YsU0FBUyxFQUNULFlBQVksR0FDTTtJQUNsQixNQUFNLEVBQUUsTUFBTSxFQUFFLEdBQUcsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzNDLE1BQU0sRUFBRSxHQUFHLElBQUksZ0JBQWdCLEVBQUUsQ0FBQztJQUVsQyxFQUFFLENBQUMsUUFBUSxDQUFDO1FBQ1YsTUFBTSxFQUFFLEdBQUcsU0FBUyw0QkFBNEI7UUFDaEQsU0FBUyxFQUFFLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDekUsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxLQUFLLEdBQUcsTUFBTSxNQUFNLENBQUMsOEJBQThCLENBQUM7UUFDeEQsZ0JBQWdCLEVBQUUsRUFBRTtRQUNwQixXQUFXLEVBQUUsdUJBQXVCO1FBQ3BDLE9BQU8sRUFBRTtZQUNQLGlCQUFpQixFQUFFLElBQUk7WUFDdkIsV0FBVyxFQUFFLElBQUk7U0FDbEI7S0FDRixDQUFDLENBQUM7SUFDSCx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNqQyxNQUFNLGVBQWUsR0FBRyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7SUFDekUsT0FBTyxlQUFlLENBQUM7QUFDekIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldENyZWF0ZWRPYmplY3RzLCBUcmFuc2FjdGlvbkJsb2NrIH0gZnJvbSBcIkBteXN0ZW4vc3VpLmpzXCI7XG5cbmltcG9ydCB7IGdldFNpZ25lciwgaGFuZGxlVHJhbnNhY3Rpb25SZXNwb25zZSB9IGZyb20gXCIuL2hlbHBlcnNcIjtcbmltcG9ydCB7IFZvdGVSZXF1ZXN0UGFyYW1zIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVZvdGVSZXF1ZXN0KHtcbiAgYXJ0d29ya0lkLFxuICByZXF1ZXN0LFxuICBhZG1pbkNhcElkLFxuICBwYWNrYWdlSWQsXG4gIHNpZ25lclBocmFzZSxcbn06IFZvdGVSZXF1ZXN0UGFyYW1zKSB7XG4gIGNvbnN0IHsgc2lnbmVyIH0gPSBnZXRTaWduZXIoc2lnbmVyUGhyYXNlKTtcbiAgY29uc3QgdHggPSBuZXcgVHJhbnNhY3Rpb25CbG9jaygpO1xuXG4gIHR4Lm1vdmVDYWxsKHtcbiAgICB0YXJnZXQ6IGAke3BhY2thZ2VJZH06OmRhbzo6Y3JlYXRlX3ZvdGVfcmVxdWVzdGAsXG4gICAgYXJndW1lbnRzOiBbdHgub2JqZWN0KGFkbWluQ2FwSWQpLCB0eC5wdXJlKGFydHdvcmtJZCksIHR4LnB1cmUocmVxdWVzdCldLFxuICB9KTtcbiAgY29uc3QgdHhSZXMgPSBhd2FpdCBzaWduZXIuc2lnbkFuZEV4ZWN1dGVUcmFuc2FjdGlvbkJsb2NrKHtcbiAgICB0cmFuc2FjdGlvbkJsb2NrOiB0eCxcbiAgICByZXF1ZXN0VHlwZTogXCJXYWl0Rm9yTG9jYWxFeGVjdXRpb25cIixcbiAgICBvcHRpb25zOiB7XG4gICAgICBzaG93T2JqZWN0Q2hhbmdlczogdHJ1ZSxcbiAgICAgIHNob3dFZmZlY3RzOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuICBoYW5kbGVUcmFuc2FjdGlvblJlc3BvbnNlKHR4UmVzKTtcbiAgY29uc3Qgdm90ZV9yZXF1ZXN0X2lkID0gZ2V0Q3JlYXRlZE9iamVjdHModHhSZXMpPy5bMF0ucmVmZXJlbmNlLm9iamVjdElkO1xuICByZXR1cm4gdm90ZV9yZXF1ZXN0X2lkO1xufVxuIl19