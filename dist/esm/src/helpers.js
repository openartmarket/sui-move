import { Connection, Ed25519Keypair, getExecutionStatus, JsonRpcProvider, RawSigner, } from "@mysten/sui.js";
import { SUI_NETWORK } from "./config";
// console.log("Connecting to ", SUI_NETWORK);
const connOptions = new Connection({
    fullnode: SUI_NETWORK,
});
export const provider = new JsonRpcProvider(connOptions);
export function getSigner(phrase) {
    if (!phrase)
        throw new Error("No phrase provided");
    const keypair = Ed25519Keypair.deriveKeypair(phrase);
    const signer = new RawSigner(keypair, provider);
    const address = keypair.getPublicKey().toSuiAddress();
    // console.log("Address = " + address);
    return { signer, address };
}
export function handleTransactionResponse(txRes) {
    const status = getExecutionStatus(txRes);
    if (status === undefined) {
        throw new Error("Failed to get execution status");
    }
    if (status.error) {
        throw new Error(status.error);
    }
    if (status.status !== "success") {
        throw new Error(`Transaction failed with status: ${status.status}`);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9oZWxwZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxVQUFVLEVBQ1YsY0FBYyxFQUNkLGtCQUFrQixFQUNsQixlQUFlLEVBQ2YsU0FBUyxHQUVWLE1BQU0sZ0JBQWdCLENBQUM7QUFFeEIsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUV2Qyw4Q0FBOEM7QUFDOUMsTUFBTSxXQUFXLEdBQUcsSUFBSSxVQUFVLENBQUM7SUFDakMsUUFBUSxFQUFFLFdBQVc7Q0FDdEIsQ0FBQyxDQUFDO0FBQ0gsTUFBTSxDQUFDLE1BQU0sUUFBUSxHQUFHLElBQUksZUFBZSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBRXpELE1BQU0sVUFBVSxTQUFTLENBQUMsTUFBYztJQUl0QyxJQUFJLENBQUMsTUFBTTtRQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUVuRCxNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3JELE1BQU0sTUFBTSxHQUFHLElBQUksU0FBUyxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUVoRCxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsWUFBWSxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDdEQsdUNBQXVDO0lBRXZDLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLENBQUM7QUFDN0IsQ0FBQztBQUVELE1BQU0sVUFBVSx5QkFBeUIsQ0FBQyxLQUFrQztJQUMxRSxNQUFNLE1BQU0sR0FBRyxrQkFBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6QyxJQUFJLE1BQU0sS0FBSyxTQUFTLEVBQUU7UUFDeEIsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0tBQ25EO0lBQ0QsSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFO1FBQ2hCLE1BQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQy9CO0lBQ0QsSUFBSSxNQUFNLENBQUMsTUFBTSxLQUFLLFNBQVMsRUFBRTtRQUMvQixNQUFNLElBQUksS0FBSyxDQUFDLG1DQUFtQyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztLQUNyRTtBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb25uZWN0aW9uLFxuICBFZDI1NTE5S2V5cGFpcixcbiAgZ2V0RXhlY3V0aW9uU3RhdHVzLFxuICBKc29uUnBjUHJvdmlkZXIsXG4gIFJhd1NpZ25lcixcbiAgU3VpVHJhbnNhY3Rpb25CbG9ja1Jlc3BvbnNlLFxufSBmcm9tIFwiQG15c3Rlbi9zdWkuanNcIjtcblxuaW1wb3J0IHsgU1VJX05FVFdPUksgfSBmcm9tIFwiLi9jb25maWdcIjtcblxuLy8gY29uc29sZS5sb2coXCJDb25uZWN0aW5nIHRvIFwiLCBTVUlfTkVUV09SSyk7XG5jb25zdCBjb25uT3B0aW9ucyA9IG5ldyBDb25uZWN0aW9uKHtcbiAgZnVsbG5vZGU6IFNVSV9ORVRXT1JLLFxufSk7XG5leHBvcnQgY29uc3QgcHJvdmlkZXIgPSBuZXcgSnNvblJwY1Byb3ZpZGVyKGNvbm5PcHRpb25zKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNpZ25lcihwaHJhc2U6IHN0cmluZyk6IHtcbiAgc2lnbmVyOiBSYXdTaWduZXI7XG4gIGFkZHJlc3M6IHN0cmluZztcbn0ge1xuICBpZiAoIXBocmFzZSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gcGhyYXNlIHByb3ZpZGVkXCIpO1xuXG4gIGNvbnN0IGtleXBhaXIgPSBFZDI1NTE5S2V5cGFpci5kZXJpdmVLZXlwYWlyKHBocmFzZSk7XG4gIGNvbnN0IHNpZ25lciA9IG5ldyBSYXdTaWduZXIoa2V5cGFpciwgcHJvdmlkZXIpO1xuXG4gIGNvbnN0IGFkZHJlc3MgPSBrZXlwYWlyLmdldFB1YmxpY0tleSgpLnRvU3VpQWRkcmVzcygpO1xuICAvLyBjb25zb2xlLmxvZyhcIkFkZHJlc3MgPSBcIiArIGFkZHJlc3MpO1xuXG4gIHJldHVybiB7IHNpZ25lciwgYWRkcmVzcyB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlVHJhbnNhY3Rpb25SZXNwb25zZSh0eFJlczogU3VpVHJhbnNhY3Rpb25CbG9ja1Jlc3BvbnNlKTogdm9pZCB7XG4gIGNvbnN0IHN0YXR1cyA9IGdldEV4ZWN1dGlvblN0YXR1cyh0eFJlcyk7XG4gIGlmIChzdGF0dXMgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgZXhlY3V0aW9uIHN0YXR1c1wiKTtcbiAgfVxuICBpZiAoc3RhdHVzLmVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKHN0YXR1cy5lcnJvcik7XG4gIH1cbiAgaWYgKHN0YXR1cy5zdGF0dXMgIT09IFwic3VjY2Vzc1wiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUcmFuc2FjdGlvbiBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7c3RhdHVzLnN0YXR1c31gKTtcbiAgfVxufVxuIl19