import { TransactionBlock } from "@mysten/sui.js";
import { findObjectIdWithOwnerAddress } from "./findObjectIdWithOwnerAddress";
import { getSigner, handleTransactionResponse } from "./helpers";
export async function splitArtworkShard(params) {
    const { artworkShardId, signerPhrase, shares, packageId } = params;
    const { signer, address } = getSigner(signerPhrase);
    const tx = new TransactionBlock();
    tx.moveCall({
        target: `${packageId}::open_art_market::split_artwork_shard`,
        arguments: [tx.object(artworkShardId), tx.pure(shares)],
    });
    const txRes = await signer.signAndExecuteTransactionBlock({
        transactionBlock: tx,
        requestType: "WaitForLocalExecution",
        options: {
            showEffects: true,
        },
    });
    handleTransactionResponse(txRes);
    const newArtworkShardId = findObjectIdWithOwnerAddress(txRes, address);
    return {
        artworkShardId: newArtworkShardId,
        owner: address,
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BsaXRfYXJ0d29ya19zaGFyZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zcGxpdF9hcnR3b3JrX3NoYXJkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRWxELE9BQU8sRUFBRSw0QkFBNEIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQzlFLE9BQU8sRUFBRSxTQUFTLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFHakUsTUFBTSxDQUFDLEtBQUssVUFBVSxpQkFBaUIsQ0FDckMsTUFBK0I7SUFFL0IsTUFBTSxFQUFFLGNBQWMsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLE1BQU0sQ0FBQztJQUNuRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUNwRCxNQUFNLEVBQUUsR0FBRyxJQUFJLGdCQUFnQixFQUFFLENBQUM7SUFFbEMsRUFBRSxDQUFDLFFBQVEsQ0FBQztRQUNWLE1BQU0sRUFBRSxHQUFHLFNBQVMsd0NBQXdDO1FBQzVELFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUN4RCxDQUFDLENBQUM7SUFFSCxNQUFNLEtBQUssR0FBRyxNQUFNLE1BQU0sQ0FBQyw4QkFBOEIsQ0FBQztRQUN4RCxnQkFBZ0IsRUFBRSxFQUFFO1FBQ3BCLFdBQVcsRUFBRSx1QkFBdUI7UUFDcEMsT0FBTyxFQUFFO1lBQ1AsV0FBVyxFQUFFLElBQUk7U0FDbEI7S0FDRixDQUFDLENBQUM7SUFFSCx5QkFBeUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNqQyxNQUFNLGlCQUFpQixHQUFHLDRCQUE0QixDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN2RSxPQUFPO1FBQ0wsY0FBYyxFQUFFLGlCQUFpQjtRQUNqQyxLQUFLLEVBQUUsT0FBTztLQUNmLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHJhbnNhY3Rpb25CbG9jayB9IGZyb20gXCJAbXlzdGVuL3N1aS5qc1wiO1xuXG5pbXBvcnQgeyBmaW5kT2JqZWN0SWRXaXRoT3duZXJBZGRyZXNzIH0gZnJvbSBcIi4vZmluZE9iamVjdElkV2l0aE93bmVyQWRkcmVzc1wiO1xuaW1wb3J0IHsgZ2V0U2lnbmVyLCBoYW5kbGVUcmFuc2FjdGlvblJlc3BvbnNlIH0gZnJvbSBcIi4vaGVscGVyc1wiO1xuaW1wb3J0IHsgQXJ0d29ya1NoYXJkRGV0YWlscywgU3BsaXRBcnR3b3JrU2hhcmRQYXJhbXMgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3BsaXRBcnR3b3JrU2hhcmQoXG4gIHBhcmFtczogU3BsaXRBcnR3b3JrU2hhcmRQYXJhbXNcbik6IFByb21pc2U8QXJ0d29ya1NoYXJkRGV0YWlscz4ge1xuICBjb25zdCB7IGFydHdvcmtTaGFyZElkLCBzaWduZXJQaHJhc2UsIHNoYXJlcywgcGFja2FnZUlkIH0gPSBwYXJhbXM7XG4gIGNvbnN0IHsgc2lnbmVyLCBhZGRyZXNzIH0gPSBnZXRTaWduZXIoc2lnbmVyUGhyYXNlKTtcbiAgY29uc3QgdHggPSBuZXcgVHJhbnNhY3Rpb25CbG9jaygpO1xuXG4gIHR4Lm1vdmVDYWxsKHtcbiAgICB0YXJnZXQ6IGAke3BhY2thZ2VJZH06Om9wZW5fYXJ0X21hcmtldDo6c3BsaXRfYXJ0d29ya19zaGFyZGAsXG4gICAgYXJndW1lbnRzOiBbdHgub2JqZWN0KGFydHdvcmtTaGFyZElkKSwgdHgucHVyZShzaGFyZXMpXSxcbiAgfSk7XG5cbiAgY29uc3QgdHhSZXMgPSBhd2FpdCBzaWduZXIuc2lnbkFuZEV4ZWN1dGVUcmFuc2FjdGlvbkJsb2NrKHtcbiAgICB0cmFuc2FjdGlvbkJsb2NrOiB0eCxcbiAgICByZXF1ZXN0VHlwZTogXCJXYWl0Rm9yTG9jYWxFeGVjdXRpb25cIixcbiAgICBvcHRpb25zOiB7XG4gICAgICBzaG93RWZmZWN0czogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICBoYW5kbGVUcmFuc2FjdGlvblJlc3BvbnNlKHR4UmVzKTtcbiAgY29uc3QgbmV3QXJ0d29ya1NoYXJkSWQgPSBmaW5kT2JqZWN0SWRXaXRoT3duZXJBZGRyZXNzKHR4UmVzLCBhZGRyZXNzKTtcbiAgcmV0dXJuIHtcbiAgICBhcnR3b3JrU2hhcmRJZDogbmV3QXJ0d29ya1NoYXJkSWQsXG4gICAgb3duZXI6IGFkZHJlc3MsXG4gIH07XG59XG4iXX0=