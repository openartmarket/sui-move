import assert from "assert";
import { mintArtwork } from "../src/artwork";
import { mintArtworkShard } from "../src/artwork_shard";
import { ADMIN_CAP_ID, ADMIN_PHRASE, PACKAGE_ID, USER1_PHRASE, USER2_PHRASE } from "../src/config";
import { mintArtworkOptions } from "./testdata";
describe("mintArtworkShard", () => {
    let artworkId;
    beforeEach(async () => {
        artworkId = await mintArtwork(mintArtworkOptions);
    });
    it("should issue new shares", async () => {
        await mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER1_PHRASE,
            shares: 2,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        });
    });
    it("should not issue new shares, when asking for too much", async () => {
        await assert.rejects(mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER1_PHRASE,
            shares: 501,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        }));
    });
    it("should not issue new shares, when sold out", async () => {
        await mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER1_PHRASE,
            shares: 150,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        });
        await mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER2_PHRASE,
            shares: 250,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        });
        await mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER1_PHRASE,
            shares: 98,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        });
        await assert.rejects(mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER2_PHRASE,
            shares: 3,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        }));
    });
    it("can give shares to OAM and owner", async () => {
        await mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: ADMIN_PHRASE,
            shares: 150,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        });
        await mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER1_PHRASE,
            shares: 50,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        });
        await mintArtworkShard({
            artworkId,
            signerPhrase: ADMIN_PHRASE,
            recieverPhrase: USER2_PHRASE,
            shares: 1,
            packageId: PACKAGE_ID,
            adminCapId: ADMIN_CAP_ID,
        });
    });
    it.skip("can set a currency of a contract", async () => {
        assert.ok(false);
    });
    it.skip("can sell some shares to another user", async () => {
        assert.ok(false);
    });
    it.skip("can sell the whole artwork and change the owner of the artwork", async () => {
        assert.ok(false);
    });
    it.skip("can set the outgoing sale price of the artwork", async () => {
        assert.ok(false);
    });
    it.skip("can burn the shares after artwork is sold", async () => {
        assert.ok(false);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWludEFydHdvcmtTaGFyZC50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdGVzdC9taW50QXJ0d29ya1NoYXJkLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxNQUFNLE1BQU0sUUFBUSxDQUFDO0FBRTVCLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUN4RCxPQUFPLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNuRyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxZQUFZLENBQUM7QUFFaEQsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtJQUNoQyxJQUFJLFNBQWlCLENBQUM7SUFDdEIsVUFBVSxDQUFDLEtBQUssSUFBSSxFQUFFO1FBQ3BCLFNBQVMsR0FBRyxNQUFNLFdBQVcsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ3BELENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHlCQUF5QixFQUFFLEtBQUssSUFBSSxFQUFFO1FBQ3ZDLE1BQU0sZ0JBQWdCLENBQUM7WUFDckIsU0FBUztZQUNULFlBQVksRUFBRSxZQUFZO1lBQzFCLGNBQWMsRUFBRSxZQUFZO1lBQzVCLE1BQU0sRUFBRSxDQUFDO1lBQ1QsU0FBUyxFQUFFLFVBQVU7WUFDckIsVUFBVSxFQUFFLFlBQVk7U0FDekIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsdURBQXVELEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDckUsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUNsQixnQkFBZ0IsQ0FBQztZQUNmLFNBQVM7WUFDVCxZQUFZLEVBQUUsWUFBWTtZQUMxQixjQUFjLEVBQUUsWUFBWTtZQUM1QixN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QUFFLEtBQUssSUFBSSxFQUFFO1FBQzlELE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xuXG5pbXBvcnQgeyBtaW50QXJ0d29yayB9IGZyb20gXCIuLi9zcmMvYXJ0d29ya1wiO1xuaW1wb3J0IHsgbWludEFydHdvcmtTaGFyZCB9IGZyb20gXCIuLi9zcmMvYXJ0d29ya19zaGFyZFwiO1xuaW1wb3J0IHsgQURNSU5fQ0FQX0lELCBBRE1JTl9QSFJBU0UsIFBBQ0tBR0VfSUQsIFVTRVIxX1BIUkFTRSwgVVNFUjJfUEhSQVNFIH0gZnJvbSBcIi4uL3NyYy9jb25maWdcIjtcbmltcG9ydCB7IG1pbnRBcnR3b3JrT3B0aW9ucyB9IGZyb20gXCIuL3Rlc3RkYXRhXCI7XG5cbmRlc2NyaWJlKFwibWludEFydHdvcmtTaGFyZFwiLCAoKSA9PiB7XG4gIGxldCBhcnR3b3JrSWQ6IHN0cmluZztcbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgYXJ0d29ya0lkID0gYXdhaXQgbWludEFydHdvcmsobWludEFydHdvcmtPcHRpb25zKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgaXNzdWUgbmV3IHNoYXJlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbWludEFydHdvcmtTaGFyZCh7XG4gICAgICBhcnR3b3JrSWQsXG4gICAgICBzaWduZXJQaHJhc2U6IEFETUlOX1BIUkFTRSxcbiAgICAgIHJlY2lldmVyUGhyYXNlOiBVU0VSMV9QSFJBU0UsXG4gICAgICBzaGFyZXM6IDIsXG4gICAgICBwYWNrYWdlSWQ6IFBBQ0tBR0VfSUQsXG4gICAgICBhZG1pbkNhcElkOiBBRE1JTl9DQVBfSUQsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIG5vdCBpc3N1ZSBuZXcgc2hhcmVzLCB3aGVuIGFza2luZyBmb3IgdG9vIG11Y2hcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IGFzc2VydC5yZWplY3RzKFxuICAgICAgbWludEFydHdvcmtTaGFyZCh7XG4gICAgICAgIGFydHdvcmtJZCxcbiAgICAgICAgc2lnbmVyUGhyYXNlOiBBRE1JTl9QSFJBU0UsXG4gICAgICAgIHJlY2lldmVyUGhyYXNlOiBVU0VSMV9QSFJBU0UsXG4gICAgICAgIHNoYXJlczogNTAxLFxuICAgICAgICBwYWNrYWdlSWQ6IFBBQ0tBR0VfSUQsXG4gICAgICAgIGFkbWluQ2FwSWQ6IEFETUlOX0NBUF9JRCxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgbm90IGlzc3VlIG5ldyBzaGFyZXMsIHdoZW4gc29sZCBvdXRcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IG1pbnRBcnR3b3JrU2hhcmQoe1xuICAgICAgYXJ0d29ya0lkLFxuICAgICAgc2lnbmVyUGhyYXNlOiBBRE1JTl9QSFJBU0UsXG4gICAgICByZWNpZXZlclBocmFzZTogVVNFUjFfUEhSQVNFLFxuICAgICAgc2hhcmVzOiAxNTAsXG4gICAgICBwYWNrYWdlSWQ6IFBBQ0tBR0VfSUQsXG4gICAgICBhZG1pbkNhcElkOiBBRE1JTl9DQVBfSUQsXG4gICAgfSk7XG4gICAgYXdhaXQgbWludEFydHdvcmtTaGFyZCh7XG4gICAgICBhcnR3b3JrSWQsXG4gICAgICBzaWduZXJQaHJhc2U6IEFETUlOX1BIUkFTRSxcbiAgICAgIHJlY2lldmVyUGhyYXNlOiBVU0VSMl9QSFJBU0UsXG4gICAgICBzaGFyZXM6IDI1MCxcbiAgICAgIHBhY2thZ2VJZDogUEFDS0FHRV9JRCxcbiAgICAgIGFkbWluQ2FwSWQ6IEFETUlOX0NBUF9JRCxcbiAgICB9KTtcbiAgICBhd2FpdCBtaW50QXJ0d29ya1NoYXJkKHtcbiAgICAgIGFydHdvcmtJZCxcbiAgICAgIHNpZ25lclBocmFzZTogQURNSU5fUEhSQVNFLFxuICAgICAgcmVjaWV2ZXJQaHJhc2U6IFVTRVIxX1BIUkFTRSxcbiAgICAgIHNoYXJlczogOTgsXG4gICAgICBwYWNrYWdlSWQ6IFBBQ0tBR0VfSUQsXG4gICAgICBhZG1pbkNhcElkOiBBRE1JTl9DQVBfSUQsXG4gICAgfSk7XG4gICAgYXdhaXQgYXNzZXJ0LnJlamVjdHMoXG4gICAgICBtaW50QXJ0d29ya1NoYXJkKHtcbiAgICAgICAgYXJ0d29ya0lkLFxuICAgICAgICBzaWduZXJQaHJhc2U6IEFETUlOX1BIUkFTRSxcbiAgICAgICAgcmVjaWV2ZXJQaHJhc2U6IFVTRVIyX1BIUkFTRSxcbiAgICAgICAgc2hhcmVzOiAzLFxuICAgICAgICBwYWNrYWdlSWQ6IFBBQ0tBR0VfSUQsXG4gICAgICAgIGFkbWluQ2FwSWQ6IEFETUlOX0NBUF9JRCxcbiAgICAgIH0pXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoXCJjYW4gZ2l2ZSBzaGFyZXMgdG8gT0FNIGFuZCBvd25lclwiLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgbWludEFydHdvcmtTaGFyZCh7XG4gICAgICBhcnR3b3JrSWQsXG4gICAgICBzaWduZXJQaHJhc2U6IEFETUlOX1BIUkFTRSxcbiAgICAgIHJlY2lldmVyUGhyYXNlOiBBRE1JTl9QSFJBU0UsXG4gICAgICBzaGFyZXM6IDE1MCxcbiAgICAgIHBhY2thZ2VJZDogUEFDS0FHRV9JRCxcbiAgICAgIGFkbWluQ2FwSWQ6IEFETUlOX0NBUF9JRCxcbiAgICB9KTtcbiAgICBhd2FpdCBtaW50QXJ0d29ya1NoYXJkKHtcbiAgICAgIGFydHdvcmtJZCxcbiAgICAgIHNpZ25lclBocmFzZTogQURNSU5fUEhSQVNFLFxuICAgICAgcmVjaWV2ZXJQaHJhc2U6IFVTRVIxX1BIUkFTRSxcbiAgICAgIHNoYXJlczogNTAsXG4gICAgICBwYWNrYWdlSWQ6IFBBQ0tBR0VfSUQsXG4gICAgICBhZG1pbkNhcElkOiBBRE1JTl9DQVBfSUQsXG4gICAgfSk7XG4gICAgYXdhaXQgbWludEFydHdvcmtTaGFyZCh7XG4gICAgICBhcnR3b3JrSWQsXG4gICAgICBzaWduZXJQaHJhc2U6IEFETUlOX1BIUkFTRSxcbiAgICAgIHJlY2lldmVyUGhyYXNlOiBVU0VSMl9QSFJBU0UsXG4gICAgICBzaGFyZXM6IDEsXG4gICAgICBwYWNrYWdlSWQ6IFBBQ0tBR0VfSUQsXG4gICAgICBhZG1pbkNhcElkOiBBRE1JTl9DQVBfSUQsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0LnNraXAoXCJjYW4gc2V0IGEgY3VycmVuY3kgb2YgYSBjb250cmFjdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgYXNzZXJ0Lm9rKGZhbHNlKTtcbiAgfSk7XG4gIGl0LnNraXAoXCJjYW4gc2VsbCBzb21lIHNoYXJlcyB0byBhbm90aGVyIHVzZXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGFzc2VydC5vayhmYWxzZSk7XG4gIH0pO1xuICBpdC5za2lwKFwiY2FuIHNlbGwgdGhlIHdob2xlIGFydHdvcmsgYW5kIGNoYW5nZSB0aGUgb3duZXIgb2YgdGhlIGFydHdvcmtcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGFzc2VydC5vayhmYWxzZSk7XG4gIH0pO1xuICBpdC5za2lwKFwiY2FuIHNldCB0aGUgb3V0Z29pbmcgc2FsZSBwcmljZSBvZiB0aGUgYXJ0d29ya1wiLCBhc3luYyAoKSA9PiB7XG4gICAgYXNzZXJ0Lm9rKGZhbHNlKTtcbiAgfSk7XG4gIGl0LnNraXAoXCJjYW4gYnVybiB0aGUgc2hhcmVzIGFmdGVyIGFydHdvcmsgaXMgc29sZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgYXNzZXJ0Lm9rKGZhbHNlKTtcbiAgfSk7XG59KTtcbiJdfQ==